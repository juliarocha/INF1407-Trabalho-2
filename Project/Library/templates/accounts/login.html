{% load static %}
<!DOCTYPE html>
<html>

<head>
  <title>Login</title>
  <link rel="stylesheet" href="{% static 'account.css' %}">
</head>

<body>

  <div class="container">
    <div class="card">
      <form class="box" method="post">
        <h1>Login</h1>
        {% csrf_token %}
        <p class="text-muted"> Entre com seu usuário e senha</p>
        <input type="text" placeholder="Usuário" name="username" id="id_username" onfocusout="Request();" />
        <input type="password" placeholder="Senha" name="password" />
        <p id="erroCadastro"></p>
        <input type="submit" value="Entrar"></input>
        <p class="text-muted">Não possui conta? <a href="/register">Crie uma conta</a></p>
      </form>
    </div>
  </div>



  <script>
    function Request() {
      document.getElementById("erroCadastro").innerHTML = ""
      var campoUsername = document.getElementById('id_username');
      fetch(url)
        .then(resposta => resposta.json())
        .then(data => mostrarResposta(data))
        .catch(erro => console.error(erro));
    }

    function mostrarResposta(data) {
      if (!data.existe) {
        document.getElementById("erroCadastro").innerHTML = "usuário não cadastrado"
      }
    }

    $('.message a').click(function () {
      $('form').animate({
        height: "toggle",
        opacity: "toggle"
      }, "slow");
    });
  </script>






</body>

</html>